<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Application lifecycle management &mdash; CKA Notes  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/custom.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Cluster Maintenance" href="cluster-maintenance.html" />
    <link rel="prev" title="Logging and Monitoring" href="logging-monitoring.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> CKA Notes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The CKABOOK:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="core-concepts.html">Core Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduling.html">Scheduling</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-monitoring.html">Logging and Monitoring</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Application lifecycle management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#yaml-specifications-for-application">yaml specifications for application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configure-sidecar-to-send-logs-to-elasticsearch">configure sidecar to send logs to elasticsearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-args-in-pod-specification">command args in pod specification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cluster-maintenance.html">Cluster Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="design-k8s.html">Design Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-k8s-kubeadm.html">Install Kubernetes with kubeadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">troubleshooting in k8s</a></li>
<li class="toctree-l1"><a class="reference internal" href="kodekloud-labs.html">kodekloud labs</a></li>
<li class="toctree-l1"><a class="reference internal" href="killersh-labs.html">killer.sh simulator labs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CKA Notes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Application lifecycle management</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="application-lifecycle-management">
<h1>Application lifecycle management<a class="headerlink" href="#application-lifecycle-management" title="Permalink to this headline"></a></h1>
<p>rollingupdate_rollbacks</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">rollingupdate_rollbacks</span><a class="headerlink" href="#id1" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Rolling Updates and Rollbacks</span>

Rollouts and version

kubectl rollout status deploy webapp
kubectl rollout <span class="nb">history</span> deploy webapp

Deployment stratefy:
-----------------------&gt;
<span class="m">1</span>.Rolling Update --&gt; its the default deployment strategy

RollingUpdateStrategy:  <span class="m">25</span>% max unavailable, <span class="m">25</span>% max surge

<span class="k">in</span> this unavailable means lets say the deployment <span class="nb">set</span> replicas as <span class="m">4</span>.
Whenever the rolling update happens the <span class="m">25</span>% pods are unavailable that means <span class="m">1</span> pod is unavailable at a time.

rollback:
--------------&gt;
kubectl rollout undo deploy webapp
</pre></div>
</div>
</div>
<p>rollingupdate_rollbackslabs</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">rollingupdate_rollbackslabs</span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@controlplane:~# kubectl get all 
NAME                            READY   STATUS    RESTARTS   AGE
pod/frontend-7776cb7d57-9gd9n   <span class="m">1</span>/1     Running   <span class="m">0</span>          29s
pod/frontend-7776cb7d57-nfgrt   <span class="m">1</span>/1     Running   <span class="m">0</span>          29s
pod/frontend-7776cb7d57-t7gvg   <span class="m">1</span>/1     Running   <span class="m">0</span>          29s
pod/frontend-7776cb7d57-vr7zg   <span class="m">1</span>/1     Running   <span class="m">0</span>          29s

NAME                     TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>          AGE
service/kubernetes       ClusterIP   <span class="m">10</span>.96.0.1        &lt;none&gt;        <span class="m">443</span>/TCP          116s
service/webapp-service   NodePort    <span class="m">10</span>.104.185.173   &lt;none&gt;        <span class="m">8080</span>:30080/TCP   29s

NAME                       READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/frontend   <span class="m">4</span>/4     <span class="m">4</span>            <span class="m">0</span>           29s

NAME                                  DESIRED   CURRENT   READY   AGE
replicaset.apps/frontend-7776cb7d57   <span class="m">4</span>         <span class="m">4</span>         <span class="m">4</span>       29s
root@controlplane:~# 


root@controlplane:~# ls -rtlh
total <span class="m">8</span>.0K
-rwxr-xr-x <span class="m">1</span> root root <span class="m">216</span> Sep <span class="m">14</span> <span class="m">01</span>:32 curl-test.sh
-rw-rw-rw- <span class="m">1</span> root root <span class="m">186</span> Sep <span class="m">14</span> <span class="m">01</span>:32 curl-pod.yaml
root@controlplane:~# 



root@controlplane:~# ./curl-test.sh 
Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

Hello, Application Version: v1 <span class="p">;</span> Color: blue OK

root@controlplane:~# 



root@controlplane:~# kubectl describe deploy frontend
Name:                   frontend
Namespace:              default
CreationTimestamp:      Mon, <span class="m">20</span> Sep <span class="m">2021</span> <span class="m">12</span>:54:01 +0000
Labels:                 &lt;none&gt;
Annotations:            deployment.kubernetes.io/revision: <span class="m">1</span>
Selector:               <span class="nv">name</span><span class="o">=</span>webapp
Replicas:               <span class="m">4</span> desired <span class="p">|</span> <span class="m">4</span> updated <span class="p">|</span> <span class="m">4</span> total <span class="p">|</span> <span class="m">4</span> available <span class="p">|</span> <span class="m">0</span> unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        <span class="m">20</span>
RollingUpdateStrategy:  <span class="m">25</span>% max unavailable, <span class="m">25</span>% max surge
Pod Template:
  Labels:  <span class="nv">name</span><span class="o">=</span>webapp
  Containers:
   simple-webapp:
    Image:        kodekloud/webapp-color:v1
    Port:         <span class="m">8080</span>/TCP
    Host Port:    <span class="m">0</span>/TCP
    Environment:  &lt;none&gt;
    Mounts:       &lt;none&gt;
  Volumes:        &lt;none&gt;
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    NewReplicaSetAvailable
OldReplicaSets:  &lt;none&gt;
NewReplicaSet:   frontend-7776cb7d57 <span class="o">(</span><span class="m">4</span>/4 replicas created<span class="o">)</span>
Events:
  Type    Reason             Age    From                   Message
  ----    ------             ----   ----                   -------
  Normal  ScalingReplicaSet  5m50s  deployment-controller  Scaled up replica <span class="nb">set</span> frontend-7776cb7d57 to <span class="m">4</span>
root@controlplane:~# 


root@controlplane:~# kubectl describe deploy frontend <span class="p">|</span> grep -i strategy
StrategyType:           RollingUpdate
RollingUpdateStrategy:  <span class="m">25</span>% max unavailable, <span class="m">25</span>% max surge
root@controlplane:~# 

root@controlplane:~# kubectl edit deploy frontend
deployment/frontend edited
root@controlplane:~#


root@controlplane:~# kubectl get rs
NAME                  DESIRED   CURRENT   READY   AGE
frontend-7776cb7d57   <span class="m">3</span>         <span class="m">3</span>         <span class="m">3</span>       8m25s
frontend-7c7fcfc8cb   <span class="m">2</span>         <span class="m">2</span>         <span class="m">0</span>       10s
root@controlplane:~# kubectl get rs
NAME                  DESIRED   CURRENT   READY   AGE
frontend-7776cb7d57   <span class="m">3</span>         <span class="m">3</span>         <span class="m">3</span>       8m28s
frontend-7c7fcfc8cb   <span class="m">2</span>         <span class="m">2</span>         <span class="m">2</span>       13s
root@controlplane:~# kubectl get rs
NAME                  DESIRED   CURRENT   READY   AGE
frontend-7776cb7d57   <span class="m">3</span>         <span class="m">3</span>         <span class="m">3</span>       8m33s
frontend-7c7fcfc8cb   <span class="m">2</span>         <span class="m">2</span>         <span class="m">2</span>       18s
root@controlplane:~# kubectl get rs
NAME                  DESIRED   CURRENT   READY   AGE
frontend-7776cb7d57   <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       8m47s
frontend-7c7fcfc8cb   <span class="m">4</span>         <span class="m">4</span>         <span class="m">2</span>       32s
root@controlplane:~# kubectl get rs
NAME                  DESIRED   CURRENT   READY   AGE
frontend-7776cb7d57   <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       9m5s
frontend-7c7fcfc8cb   <span class="m">4</span>         <span class="m">4</span>         <span class="m">4</span>       50s
root@controlplane:~# kubectl get rs
NAME                  DESIRED   CURRENT   READY   AGE
frontend-7776cb7d57   <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       9m21s
frontend-7c7fcfc8cb   <span class="m">4</span>         <span class="m">4</span>         <span class="m">4</span>       66s
root@controlplane:~#


root@controlplane:~# ./curl-test.sh 
Hello, Application Version: v2 <span class="p">;</span> Color: green OK

Hello, Application Version: v2 <span class="p">;</span> Color: green OK

Hello, Application Version: v2 <span class="p">;</span> Color: green OK

Hello, Application Version: v2 <span class="p">;</span> Color: green OK

Hello, Application Version: v2 <span class="p">;</span> Color: green OK

Hello, Application Version: v2 <span class="p">;</span> Color: green OK

Hello, Application Version: v2 <span class="p">;</span> Color: green OK

Hello, Application Version: v2 <span class="p">;</span> Color: green OK

Hello, Application Version: v2 <span class="p">;</span> Color: green OK

root@controlplane:~# 


root@controlplane:~# kubectl edit deploy frontend 
deployment.apps/frontend edited
root@controlplane:~# 


root@controlplane:~# kubectl edit deploy frontend 
deployment.apps/frontend edited
root@controlplane:~# 

root@controlplane:~# ./curl-test.sh 
Hello, Application Version: v3 <span class="p">;</span> Color: red OK

Hello, Application Version: v3 <span class="p">;</span> Color: red OK

Hello, Application Version: v3 <span class="p">;</span> Color: red OK

Hello, Application Version: v3 <span class="p">;</span> Color: red OK

Hello, Application Version: v3 <span class="p">;</span> Color: red OK

Hello, Application Version: v3 <span class="p">;</span> Color: red OK

Hello, Application Version: v3 <span class="p">;</span> Color: red OK

Hello, Application Version: v3 <span class="p">;</span> Color: red OK

Hello, Application Version: v3 <span class="p">;</span> Color: red OK

root@controlplane:~# 
</pre></div>
</div>
</div>
<p>curl_test</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">curl_test</span><a class="headerlink" href="#id3" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">1</span>..10<span class="o">}</span><span class="p">;</span> <span class="k">do</span>
   kubectl <span class="nb">exec</span> --namespace<span class="o">=</span>kube-public curl -- sh -c <span class="s1">&#39;test=`wget -qO- -T 2  http://webapp-service.default.svc.cluster.local:8080/info 2&gt;&amp;1` &amp;&amp; echo &quot;$test OK&quot; || echo &quot;Failed&quot;&#39;</span><span class="p">;</span>
   <span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
</div>
<p>configureapp</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">configureapp</span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Configuring Command and Arguments on applications
Configuring Environment Variables
Configuring Secrets
</pre></div>
</div>
</div>
<p>dockercommands</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">dockercommands</span><a class="headerlink" href="#id5" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker run ubuntu
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
37797d16b7bf        ubuntu              <span class="s2">&quot;bash&quot;</span>              <span class="m">14</span> seconds ago      Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> <span class="m">13</span> seconds ago                       amazing_sinoussi
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker run ubuntu sleep <span class="m">100</span>
...
...
...

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
d7cf7e1b851a        ubuntu              <span class="s2">&quot;sleep 100&quot;</span>         <span class="m">27</span> seconds ago      Up <span class="m">26</span> seconds                           zen_poincare
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 


MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker build -t ubuntu-sleeper .
Sending build context to Docker daemon  <span class="m">14</span>.34kB
Step <span class="m">1</span>/2 : FROM ubuntu
 ---&gt; 1318b700e415
Step <span class="m">2</span>/2 : CMD <span class="o">[</span><span class="s2">&quot;sleep&quot;</span>, <span class="s2">&quot;10&quot;</span><span class="o">]</span>
 ---&gt; Running <span class="k">in</span> fb7ee02bbaee
Removing intermediate container fb7ee02bbaee
 ---&gt; a1b5b5b1a7f0
Successfully built a1b5b5b1a7f0
Successfully tagged ubuntu-sleeper:latest
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 


MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker run ubuntu-sleeper
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
f617feb39df1        ubuntu-sleeper      <span class="s2">&quot;sleep 10&quot;</span>          <span class="m">6</span> seconds ago       Up <span class="m">6</span> seconds                            naughty_cannon
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 


<span class="k">for</span> CMD --&gt; Command line parameters gets replaced entirely.
<span class="k">for</span> ENTRYPOINT --&gt; Command line parameters gets appended.



MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker build -t docker-sleeper-entry .
Sending build context to Docker daemon  <span class="m">15</span>.36kB
Step <span class="m">1</span>/2 : FROM ubuntu
 ---&gt; 1318b700e415
Step <span class="m">2</span>/2 : ENTRYPOINT <span class="o">[</span> <span class="s2">&quot;sleep&quot;</span> <span class="o">]</span>
 ---&gt; Running <span class="k">in</span> 4f01af5f85d2
Removing intermediate container 4f01af5f85d2
 ---&gt; a0374708bc2d
Successfully built a0374708bc2d
Successfully tagged docker-sleeper-entry:latest
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker run docker-sleeper-entry <span class="m">30</span>

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker ps
CONTAINER ID        IMAGE                  COMMAND             CREATED             STATUS              PORTS               NAMES
8bf99af8cc28        docker-sleeper-entry   <span class="s2">&quot;sleep 30&quot;</span>          <span class="m">5</span> seconds ago       Up <span class="m">4</span> seconds                            practical_keller
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker build -t ubuntu-sleeper-entry-cmd .
Sending build context to Docker daemon   <span class="m">16</span>.9kB
Step <span class="m">1</span>/3 : FROM ubuntu
 ---&gt; 1318b700e415
Step <span class="m">2</span>/3 : ENTRYPOINT <span class="o">[</span> <span class="s2">&quot;sleep&quot;</span> <span class="o">]</span>
 ---&gt; Using cache
 ---&gt; a0374708bc2d
Step <span class="m">3</span>/3 : CMD <span class="o">[</span><span class="s2">&quot;5&quot;</span><span class="o">]</span>
 ---&gt; Using cache
 ---&gt; eb7d440ee852
Successfully built eb7d440ee852
Successfully tagged ubuntu-sleeper-entry-cmd:latest
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 


MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker run ubuntu-sleeper-entry-cmd
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ docker ps
CONTAINER ID        IMAGE                      COMMAND             CREATED             STATUS              PORTS               NAMES
4ca3f97c129a        ubuntu-sleeper-entry-cmd   <span class="s2">&quot;sleep 5&quot;</span>           <span class="m">4</span> seconds ago       Up <span class="m">4</span> seconds                            determined_bose
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 
</pre></div>
</div>
</div>
<p>k8s_commands</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">k8s_commands</span><a class="headerlink" href="#id6" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>How to specify arguments <span class="k">in</span> pod definition file

apiVersion: v1
kind: Pod
metadata:
  labels:
    run: ubuntu-sleeper
  name: ubuntu-sleeper
spec:
  containers:
  - image: ubuntu-sleeper-entry-cmd
    name: ubuntu-sleeper
    command: <span class="o">[</span><span class="s2">&quot;sleep2.0&quot;</span><span class="o">]</span> <span class="c1"># It overwrites the ENTRYPOINT in docker</span>
    args: <span class="o">[</span><span class="s2">&quot;35&quot;</span><span class="o">]</span> <span class="c1"># It overwrites the CMD field in docker</span>
</pre></div>
</div>
</div>
<p>k8s_commandslabs</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">k8s_commandslabs</span><a class="headerlink" href="#id7" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@controlplane:~# kubectl get pods
NAME             READY   STATUS    RESTARTS   AGE
ubuntu-sleeper   <span class="m">1</span>/1     Running   <span class="m">0</span>          2m25s
root@controlplane:~# 

root@controlplane:~# cat ubuntu-sleeper-2.yaml 
apiVersion: v1 
kind: Pod 
metadata:
  name: ubuntu-sleeper-2 
spec:
  containers:
  - name: ubuntu
    image: ubuntu
    command:
    - <span class="s2">&quot;sleep&quot;</span>
    - <span class="s2">&quot;5000&quot;</span>
root@controlplane:~# 

root@controlplane:~# vim ubuntu-sleeper-2.yaml 
root@controlplane:~# kubectl apply -f ubuntu-sleeper-2.yaml
pod/ubuntu-sleeper-2 created
root@controlplane:~#


root@controlplane:~# cat ubuntu-sleeper-2.yaml 
apiVersion: v1 
kind: Pod 
metadata:
  name: ubuntu-sleeper-2 
spec:
  containers:
  - name: ubuntu
    image: ubuntu
    command:
    - <span class="s2">&quot;sleep&quot;</span>
    - <span class="s2">&quot;5000&quot;</span>
root@controlplane:~# 



root@controlplane:~# kubectl edit pod ubuntu-sleeper-3
error: pods <span class="s2">&quot;ubuntu-sleeper-3&quot;</span> is invalid
A copy of your changes has been stored to <span class="s2">&quot;/tmp/kubectl-edit-wyzn1.yaml&quot;</span>
error: Edit cancelled, no valid changes were saved.
root@controlplane:~# kubectl delete pod ubuntu-sleeper-3
pod <span class="s2">&quot;ubuntu-sleeper-3&quot;</span> deleted
kubectl apply -f /tmp/kubectl-edit-wyzn1.yaml
root@controlplane:~# kubectl apply -f /tmp/kubectl-edit-wyzn1.yaml
pod/ubuntu-sleeper-3 created
root@controlplane:~# 



root@controlplane:~/webapp-color# kubectl run webapp-green --image<span class="o">=</span>kodekloud/webapp-color --dry-run<span class="o">=</span>client -o yaml
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: null
  labels:
    run: webapp-green
  name: webapp-green
spec:
  containers:
  - image: kodekloud/webapp-color
    name: webapp-green
    resources: <span class="o">{}</span>
  dnsPolicy: ClusterFirst
  restartPolicy: Always
status: <span class="o">{}</span>
</pre></div>
</div>
</div>
<p>configmap</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">configmap</span><a class="headerlink" href="#id8" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ENV variables <span class="k">in</span> kubernetes

<span class="m">1</span>. use directly as env <span class="k">in</span> pod specification file
<span class="m">2</span>. use configMaps
<span class="m">3</span>. Use secrets

apiVersion: v1
kind: Pod
metadata:
  labels:
    run: webapp-green
  name: webapp-green
spec:
  containers:
  - image: kodekloud/webapp-color
    name: webapp-green
    env:
     - name: APP_COLOR
       value: pink
     - name: APP_VERSION
       valueFrom:
         configMapKeyRef:
     - name: APP_BUILD
       valueFrom:
         secretKeyRef:


<span class="m">1</span>. Create configMaps
<span class="m">2</span>. Inject configMaps into the pod

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl create configmap applicatio-config --from-literal<span class="o">=</span><span class="nv">APP_COLOR</span><span class="o">=</span>pink --from-literal<span class="o">=</span><span class="nv">APP_BUILD</span><span class="o">=</span>prod --from-literal<span class="o">=</span><span class="nv">APP_VERSION</span><span class="o">=</span><span class="m">1</span>.0
configmaps <span class="s2">&quot;applicatio-config&quot;</span> created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl get cm 
NAME                DATA   AGE
applicatio-config   <span class="m">3</span>      44s
kube-root-ca.crt    <span class="m">1</span>      16d
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl get cm applicatio-config -o yaml
apiVersion: v1
data:
  APP_BUILD: prod
  APP_COLOR: pink
  APP_VERSION: <span class="s2">&quot;1.0&quot;</span>
kind: ConfigMap
metadata:
  creationTimestamp: <span class="s2">&quot;2021-09-20T23:41:13Z&quot;</span>
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        .: <span class="o">{}</span>
        f:APP_BUILD: <span class="o">{}</span>
        f:APP_COLOR: <span class="o">{}</span>
        f:APP_VERSION: <span class="o">{}</span>
    manager: kubectl-create
    operation: Update
    time: <span class="s2">&quot;2021-09-20T23:41:13Z&quot;</span>
  name: applicatio-config
  namespace: default
  resourceVersion: <span class="s2">&quot;100911&quot;</span>
  uid: 5495db4a-30e6-45cf-bfb1-923ab7e75791


MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl create cm  bkapp-config1 --from-file<span class="o">=</span>./app_config.properties 
configmap/bkapp-config1 created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl get cm bkapp-config1 -o yaml
apiVersion: v1
data:
  app_config.properties: <span class="p">|</span>-
    <span class="nv">APP_COLOR</span><span class="o">=</span>red
    <span class="nv">APP_BUILD</span><span class="o">=</span>preprod
    <span class="nv">APP_VERSION</span><span class="o">=</span><span class="m">2</span>.0
kind: ConfigMap
metadata:
  creationTimestamp: <span class="s2">&quot;2021-09-20T23:45:36Z&quot;</span>
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        .: <span class="o">{}</span>
        f:app_config.properties: <span class="o">{}</span>
    manager: kubectl-create
    operation: Update
    time: <span class="s2">&quot;2021-09-20T23:45:36Z&quot;</span>
  name: bkapp-config1
  namespace: default
  resourceVersion: <span class="s2">&quot;101103&quot;</span>
  uid: 684590da-7d86-4214-b67e-79bdfa7c06fc
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$


Declaratively create configmaps:
----------------------------------------------------------------&gt;
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl apply -f demo_configmap.yaml 
configmap/bkconfigmap created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl get cm bkconfigmap -o yaml
apiVersion: v1
data:
  APP_BUID: dev
  APP_COLOR: pink
  APP_VERSION: <span class="s2">&quot;3.0&quot;</span>
kind: ConfigMap
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: <span class="p">|</span>
      <span class="o">{</span><span class="s2">&quot;apiVersion&quot;</span>:<span class="s2">&quot;v1&quot;</span>,<span class="s2">&quot;data&quot;</span>:<span class="o">{</span><span class="s2">&quot;APP_BUID&quot;</span>:<span class="s2">&quot;dev&quot;</span>,<span class="s2">&quot;APP_COLOR&quot;</span>:<span class="s2">&quot;pink&quot;</span>,<span class="s2">&quot;APP_VERSION&quot;</span>:<span class="s2">&quot;3.0&quot;</span><span class="o">}</span>,<span class="s2">&quot;kind&quot;</span>:<span class="s2">&quot;ConfigMap&quot;</span>,<span class="s2">&quot;metadata&quot;</span>:<span class="o">{</span><span class="s2">&quot;annotations&quot;</span>:<span class="o">{}</span>,<span class="s2">&quot;labels&quot;</span>:<span class="o">{</span><span class="s2">&quot;app&quot;</span>:<span class="s2">&quot;bkapplication&quot;</span><span class="o">}</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;bkconfigmap&quot;</span>,<span class="s2">&quot;namespace&quot;</span>:<span class="s2">&quot;default&quot;</span><span class="o">}}</span>
  creationTimestamp: <span class="s2">&quot;2021-09-20T23:49:38Z&quot;</span>
  labels:
    app: bkapplication
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        .: <span class="o">{}</span>
        f:APP_BUID: <span class="o">{}</span>
        f:APP_COLOR: <span class="o">{}</span>
        f:APP_VERSION: <span class="o">{}</span>
      f:metadata:
        f:annotations:
          .: <span class="o">{}</span>
          f:kubectl.kubernetes.io/last-applied-configuration: <span class="o">{}</span>
        f:labels:
          .: <span class="o">{}</span>
          f:app: <span class="o">{}</span>
    manager: kubectl-client-side-apply
    operation: Update
    time: <span class="s2">&quot;2021-09-20T23:49:38Z&quot;</span>
  name: bkconfigmap
  namespace: default
  resourceVersion: <span class="s2">&quot;101273&quot;</span>
  uid: 9e2932e7-06db-4a0c-b855-146a80928ad3
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 



MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl describe cm bkconfigmap
Name:         bkconfigmap
Namespace:    default
Labels:       <span class="nv">app</span><span class="o">=</span>bkapplication
Annotations:  &lt;none&gt;

<span class="nv">Data</span>
<span class="o">====</span>
APP_BUID:
----
dev
APP_COLOR:
----
pink
APP_VERSION:
----
<span class="m">3</span>.0
Events:  &lt;none&gt;
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 



MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl run nginx --image<span class="o">=</span>nginx --port<span class="o">=</span><span class="m">8080</span> --dry-run<span class="o">=</span>client -o yaml &gt; use_configmaps_in_pod.yaml
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 


MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl apply -f use_configmaps_in_pod.yaml 
pod/nginx created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl describe pod nginx
Name:         nginx
Namespace:    default
Priority:     <span class="m">0</span>
Node:         minikube/192.168.49.2
Start Time:   Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">07</span>:57:25 +0800
Labels:       <span class="nv">run</span><span class="o">=</span>nginx
Annotations:  &lt;none&gt;
Status:       Running
IP:           <span class="m">172</span>.17.0.3
IPs:
  IP:  <span class="m">172</span>.17.0.3
Containers:
  nginx:
    Container ID:   docker://c3ef07e5d47eb4c688c6096ce122cbe0d0bf8e32861c9c76789ebab030a4bb37
    Image:          nginx
    Image ID:       docker-pullable://nginx@sha256:853b221d3341add7aaadf5f81dd088ea943ab9c918766e295321294b035f3f3e
    Port:           <span class="m">80</span>/TCP
    Host Port:      <span class="m">0</span>/TCP
    State:          Running
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">07</span>:57:32 +0800
    Ready:          True
    Restart Count:  <span class="m">0</span>
    Environment Variables from:
      bkconfigmap  ConfigMap  Optional: <span class="nb">false</span>
    Environment:   &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-lxpp9 <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-lxpp9:
    Type:        Secret <span class="o">(</span>a volume populated by a Secret<span class="o">)</span>
    SecretName:  default-token-lxpp9
    Optional:    <span class="nb">false</span>
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
                 node.kubernetes.io/unreachable:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  9s    default-scheduler  Successfully assigned default/nginx to minikube
  Normal  Pulling    8s    kubelet            Pulling image <span class="s2">&quot;nginx&quot;</span>
  Normal  Pulled     2s    kubelet            Successfully pulled image <span class="s2">&quot;nginx&quot;</span> <span class="k">in</span> <span class="m">5</span>.7820856s
  Normal  Created    2s    kubelet            Created container nginx
  Normal  Started    2s    kubelet            Started container nginx
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 
</pre></div>
</div>
</div>
<p>configmaplabs</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">configmaplabs</span><a class="headerlink" href="#id9" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@controlplane:~# kubectl get pods
NAME           READY   STATUS    RESTARTS   AGE
webapp-color   <span class="m">1</span>/1     Running   <span class="m">0</span>          23s
root@controlplane:~# 


root@controlplane:~# kubectl describe pod webapp-color <span class="p">|</span> grep -iC5 <span class="s2">&quot;environment&quot;</span>
    Host Port:      &lt;none&gt;
    State:          Running
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">00</span>:06:12 +0000
    Ready:          True
    Restart Count:  <span class="m">0</span>
    Environment:
      APP_COLOR:  pink
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-rrblh <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type              Status
root@controlplane:~# 




root@controlplane:~# kubectl get pod webapp-color -o yaml
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: <span class="s2">&quot;2021-09-21T00:05:54Z&quot;</span>
  labels:
    name: webapp-color
spec:
  containers:
  - env:
    - name: APP_COLOR
      value: pink
    image: kodekloud/webapp-color
    imagePullPolicy: Always
    name: webapp-color
    resources: <span class="o">{}</span>
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: default-token-rrblh
      readOnly: <span class="nb">true</span>
  dnsPolicy: ClusterFirst
  enableServiceLinks: <span class="nb">true</span>
  nodeName: controlplane
  preemptionPolicy: PreemptLowerPriority
  priority: <span class="m">0</span>
  restartPolicy: Always
  schedulerName: default-scheduler
  securityContext: <span class="o">{}</span>
  serviceAccount: default
  serviceAccountName: default
  terminationGracePeriodSeconds: <span class="m">30</span>
  tolerations:
  - effect: NoExecute
    key: node.kubernetes.io/not-ready
    operator: Exists
    tolerationSeconds: <span class="m">300</span>
  - effect: NoExecute
    key: node.kubernetes.io/unreachable
    operator: Exists
    tolerationSeconds: <span class="m">300</span>
  volumes:
  - name: default-token-rrblh
    secret:
      defaultMode: <span class="m">420</span>
      secretName: default-token-rrblh
root@controlplane:~# 


root@controlplane:~# kubectl get cm
NAME               DATA   AGE
db-config          <span class="m">3</span>      7s
kube-root-ca.crt   <span class="m">1</span>      17m
root@controlplane:~# 

root@controlplane:~# kubectl describe cm db-config
Name:         db-config
Namespace:    default
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;

<span class="nv">Data</span>
<span class="o">====</span>
DB_PORT:
----
<span class="m">3306</span>
DB_HOST:
----
SQL01.example.com
DB_NAME:
----
SQL01
Events:  &lt;none&gt;
root@controlplane:~# 


root@controlplane:~# kubectl create cm webapp-config-map --from-literal<span class="o">=</span><span class="nv">APP_COLOR</span><span class="o">=</span>darkblue --dry-run<span class="o">=</span>client -o yaml
apiVersion: v1
data:
  APP_COLOR: darkblue
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: webapp-config-map
root@controlplane:~# 


MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl create cm webapp-config-map --from-literal<span class="o">=</span><span class="nv">APP_COLOR</span><span class="o">=</span>darkblue --dry-run<span class="o">=</span>client -o yaml &gt; webapp-config-map.yaml
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl apply -f webapp-config-map.yaml
configmap/webapp-config-map created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl apply -f use_configmaps_envFrom.yaml 
pod/webapp-color created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 




root@controlplane:~# kubectl apply -f /tmp/kubectl-edit-roe4a.yaml
pod/webapp-color created
root@controlplane:~# 



root@controlplane:~# cat /tmp/kubectl-edit-roe4a.yaml
<span class="c1"># Please edit the object below. Lines beginning with a &#39;#&#39; will be ignored,</span>
<span class="c1"># and an empty file will abort the edit. If an error occurs while saving this file will be</span>
<span class="c1"># reopened with the relevant failures.</span>
<span class="c1">#</span>
<span class="c1"># pods &quot;webapp-color&quot; was not valid:</span>
<span class="c1"># * &lt;nil&gt;: Invalid value: &quot;The edited file failed validation&quot;: [yaml: line 18: did not find expected &#39;-&#39; indicator, invalid character &#39;a&#39; looking for beginning of value]</span>
<span class="c1">#</span>
apiVersion: v1
kind: Pod
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: <span class="p">|</span>
      <span class="o">{</span><span class="s2">&quot;apiVersion&quot;</span>:<span class="s2">&quot;v1&quot;</span>,<span class="s2">&quot;kind&quot;</span>:<span class="s2">&quot;Pod&quot;</span>,<span class="s2">&quot;metadata&quot;</span>:<span class="o">{</span><span class="s2">&quot;annotations&quot;</span>:<span class="o">{}</span>,<span class="s2">&quot;creationTimestamp&quot;</span>:<span class="s2">&quot;2021-09-21T00:12:58Z&quot;</span>,<span class="s2">&quot;labels&quot;</span>:<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;webapp-color&quot;</span><span class="o">}</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;webapp-color&quot;</span>,<span class="s2">&quot;namespace&quot;</span>:<span class="s2">&quot;default&quot;</span>,<span class="s2">&quot;resourceVersion&quot;</span>:<span class="s2">&quot;1669&quot;</span>,<span class="s2">&quot;uid&quot;</span>:<span class="s2">&quot;f5a9535d-c25f-4ecd-91e0-1b46d9aa4fdd&quot;</span><span class="o">}</span>,<span class="s2">&quot;spec&quot;</span>:<span class="o">{</span><span class="s2">&quot;containers&quot;</span>:<span class="o">[{</span><span class="s2">&quot;env&quot;</span>:<span class="o">[{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;APP_COLOR&quot;</span>,<span class="s2">&quot;value&quot;</span>:<span class="s2">&quot;green&quot;</span><span class="o">}]</span>,<span class="s2">&quot;envFrom&quot;</span>:<span class="o">[{</span><span class="s2">&quot;configMapRef&quot;</span>:<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;webapp-config-map&quot;</span><span class="o">}}]</span>,<span class="s2">&quot;image&quot;</span>:<span class="s2">&quot;kodekloud/webapp-color&quot;</span>,<span class="s2">&quot;imagePullPolicy&quot;</span>:<span class="s2">&quot;Always&quot;</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;webapp-color&quot;</span>,<span class="s2">&quot;resources&quot;</span>:<span class="o">{}</span>,<span class="s2">&quot;terminationMessagePath&quot;</span>:<span class="s2">&quot;/dev/termination-log&quot;</span>,<span class="s2">&quot;terminationMessagePolicy&quot;</span>:<span class="s2">&quot;File&quot;</span>,<span class="s2">&quot;volumeMounts&quot;</span>:<span class="o">[{</span><span class="s2">&quot;mountPath&quot;</span>:<span class="s2">&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;default-token-rrblh&quot;</span>,<span class="s2">&quot;readOnly&quot;</span>:true<span class="o">}]}]</span>,<span class="s2">&quot;dnsPolicy&quot;</span>:<span class="s2">&quot;ClusterFirst&quot;</span>,<span class="s2">&quot;enableServiceLinks&quot;</span>:true,<span class="s2">&quot;nodeName&quot;</span>:<span class="s2">&quot;controlplane&quot;</span>,<span class="s2">&quot;preemptionPolicy&quot;</span>:<span class="s2">&quot;PreemptLowerPriority&quot;</span>,<span class="s2">&quot;priority&quot;</span>:0,<span class="s2">&quot;restartPolicy&quot;</span>:<span class="s2">&quot;Always&quot;</span>,<span class="s2">&quot;schedulerName&quot;</span>:<span class="s2">&quot;default-scheduler&quot;</span>,<span class="s2">&quot;securityContext&quot;</span>:<span class="o">{}</span>,<span class="s2">&quot;serviceAccount&quot;</span>:<span class="s2">&quot;default&quot;</span>,<span class="s2">&quot;serviceAccountName&quot;</span>:<span class="s2">&quot;default&quot;</span>,<span class="s2">&quot;terminationGracePeriodSeconds&quot;</span>:30,<span class="s2">&quot;tolerations&quot;</span>:<span class="o">[{</span><span class="s2">&quot;effect&quot;</span>:<span class="s2">&quot;NoExecute&quot;</span>,<span class="s2">&quot;key&quot;</span>:<span class="s2">&quot;node.kubernetes.io/not-ready&quot;</span>,<span class="s2">&quot;operator&quot;</span>:<span class="s2">&quot;Exists&quot;</span>,<span class="s2">&quot;tolerationSeconds&quot;</span>:300<span class="o">}</span>,<span class="o">{</span><span class="s2">&quot;effect&quot;</span>:<span class="s2">&quot;NoExecute&quot;</span>,<span class="s2">&quot;key&quot;</span>:<span class="s2">&quot;node.kubernetes.io/unreachable&quot;</span>,<span class="s2">&quot;operator&quot;</span>:<span class="s2">&quot;Exists&quot;</span>,<span class="s2">&quot;tolerationSeconds&quot;</span>:300<span class="o">}]</span>,<span class="s2">&quot;volumes&quot;</span>:<span class="o">[{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;default-token-rrblh&quot;</span>,<span class="s2">&quot;secret&quot;</span>:<span class="o">{</span><span class="s2">&quot;defaultMode&quot;</span>:420,<span class="s2">&quot;secretName&quot;</span>:<span class="s2">&quot;default-token-rrblh&quot;</span><span class="o">}}]}</span>,<span class="s2">&quot;status&quot;</span>:<span class="o">{</span><span class="s2">&quot;conditions&quot;</span>:<span class="o">[{</span><span class="s2">&quot;lastProbeTime&quot;</span>:null,<span class="s2">&quot;lastTransitionTime&quot;</span>:<span class="s2">&quot;2021-09-21T00:12:58Z&quot;</span>,<span class="s2">&quot;status&quot;</span>:<span class="s2">&quot;True&quot;</span>,<span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;Initialized&quot;</span><span class="o">}</span>,<span class="o">{</span><span class="s2">&quot;lastProbeTime&quot;</span>:null,<span class="s2">&quot;lastTransitionTime&quot;</span>:<span class="s2">&quot;2021-09-21T00:13:01Z&quot;</span>,<span class="s2">&quot;status&quot;</span>:<span class="s2">&quot;True&quot;</span>,<span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;Ready&quot;</span><span class="o">}</span>,<span class="o">{</span><span class="s2">&quot;lastProbeTime&quot;</span>:null,<span class="s2">&quot;lastTransitionTime&quot;</span>:<span class="s2">&quot;2021-09-21T00:13:01Z&quot;</span>,<span class="s2">&quot;status&quot;</span>:<span class="s2">&quot;True&quot;</span>,<span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;ContainersReady&quot;</span><span class="o">}</span>,<span class="o">{</span><span class="s2">&quot;lastProbeTime&quot;</span>:null,<span class="s2">&quot;lastTransitionTime&quot;</span>:<span class="s2">&quot;2021-09-21T00:12:58Z&quot;</span>,<span class="s2">&quot;status&quot;</span>:<span class="s2">&quot;True&quot;</span>,<span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;PodScheduled&quot;</span><span class="o">}]</span>,<span class="s2">&quot;containerStatuses&quot;</span>:<span class="o">[{</span><span class="s2">&quot;containerID&quot;</span>:<span class="s2">&quot;docker://4061cfcda617f577f11ff5ab34a8e941a9a898c5da636899d3ec1be18ef8d378&quot;</span>,<span class="s2">&quot;image&quot;</span>:<span class="s2">&quot;kodekloud/webapp-color:latest&quot;</span>,<span class="s2">&quot;imageID&quot;</span>:<span class="s2">&quot;docker-pullable://kodekloud/webapp-color@sha256:99c3821ea49b89c7a22d3eebab5c2e1ec651452e7675af243485034a72eb1423&quot;</span>,<span class="s2">&quot;lastState&quot;</span>:<span class="o">{}</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;webapp-color&quot;</span>,<span class="s2">&quot;ready&quot;</span>:true,<span class="s2">&quot;restartCount&quot;</span>:0,<span class="s2">&quot;started&quot;</span>:true,<span class="s2">&quot;state&quot;</span>:<span class="o">{</span><span class="s2">&quot;running&quot;</span>:<span class="o">{</span><span class="s2">&quot;startedAt&quot;</span>:<span class="s2">&quot;2021-09-21T00:13:01Z&quot;</span><span class="o">}}}]</span>,<span class="s2">&quot;hostIP&quot;</span>:<span class="s2">&quot;10.58.226.9&quot;</span>,<span class="s2">&quot;phase&quot;</span>:<span class="s2">&quot;Running&quot;</span>,<span class="s2">&quot;podIP&quot;</span>:<span class="s2">&quot;10.244.0.5&quot;</span>,<span class="s2">&quot;podIPs&quot;</span>:<span class="o">[{</span><span class="s2">&quot;ip&quot;</span>:<span class="s2">&quot;10.244.0.5&quot;</span><span class="o">}]</span>,<span class="s2">&quot;qosClass&quot;</span>:<span class="s2">&quot;BestEffort&quot;</span>,<span class="s2">&quot;startTime&quot;</span>:<span class="s2">&quot;2021-09-21T00:12:58Z&quot;</span><span class="o">}}</span>
  creationTimestamp: <span class="s2">&quot;2021-09-21T00:22:48Z&quot;</span>
  labels:
    name: webapp-color
  name: webapp-color
  namespace: default
  resourceVersion: <span class="s2">&quot;2395&quot;</span>
  uid: 7af0cf70-d31f-4e82-bf90-b1edf045d6a8
spec:
  containers:
  - envFrom:
     - configMapRef:
         name: webapp-config-map
    image: kodekloud/webapp-color
    imagePullPolicy: Always
    name: webapp-color
    resources: <span class="o">{}</span>
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: default-token-rrblh
      readOnly: <span class="nb">true</span>
  dnsPolicy: ClusterFirst
  enableServiceLinks: <span class="nb">true</span>
  nodeName: controlplane
  preemptionPolicy: PreemptLowerPriority
  priority: <span class="m">0</span>
  restartPolicy: Always
  schedulerName: default-scheduler
  securityContext: <span class="o">{}</span>
  serviceAccount: default
  serviceAccountName: default
  terminationGracePeriodSeconds: <span class="m">30</span>
  tolerations:
  - effect: NoExecute
    key: node.kubernetes.io/not-ready
    operator: Exists
    tolerationSeconds: <span class="m">300</span>
  - effect: NoExecute
    key: node.kubernetes.io/unreachable
    operator: Exists
    tolerationSeconds: <span class="m">300</span>
  volumes:
  - name: default-token-rrblh
    secret:
      defaultMode: <span class="m">420</span>
      secretName: default-token-rrblh
status:
  conditions:
  - lastProbeTime: null
    lastTransitionTime: <span class="s2">&quot;2021-09-21T00:22:48Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: Initialized
  - lastProbeTime: null
    lastTransitionTime: <span class="s2">&quot;2021-09-21T00:22:52Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: Ready
  - lastProbeTime: null
    lastTransitionTime: <span class="s2">&quot;2021-09-21T00:22:52Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: ContainersReady
  - lastProbeTime: null
    lastTransitionTime: <span class="s2">&quot;2021-09-21T00:22:48Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: PodScheduled
  containerStatuses:
  - containerID: docker://93a644dc8e6283b359c1404c42d56fecc679fb54e4b3a65d2ebd8ab149c83567
    image: kodekloud/webapp-color:latest
    imageID: docker-pullable://kodekloud/webapp-color@sha256:99c3821ea49b89c7a22d3eebab5c2e1ec651452e7675af243485034a72eb1423
    lastState: <span class="o">{}</span>
    name: webapp-color
    ready: <span class="nb">true</span>
    restartCount: <span class="m">0</span>
    started: <span class="nb">true</span>
    state:
      running:
        startedAt: <span class="s2">&quot;2021-09-21T00:22:51Z&quot;</span>
  hostIP: <span class="m">10</span>.58.226.9
  phase: Running
  podIP: <span class="m">10</span>.244.0.6
  podIPs:
  - ip: <span class="m">10</span>.244.0.6
  qosClass: BestEffort
  startTime: <span class="s2">&quot;2021-09-21T00:22:48Z&quot;</span>
root@controlplane:~# 


MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl explain pods --recursive <span class="p">|</span> grep -iA5 <span class="s2">&quot;envFrom&quot;</span>
         envFrom        &lt;<span class="o">[]</span>Object&gt;      
            configMapRef        &lt;Object&gt;
               name     &lt;string&gt;
               optional &lt;boolean&gt;
            prefix      &lt;string&gt;
            secretRef   &lt;Object&gt;
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$

 envFrom        &lt;<span class="o">[]</span>Object&gt;  --&gt; it is a list <span class="o">[]</span>
</pre></div>
</div>
</div>
<p>secrets</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">secrets</span><a class="headerlink" href="#id10" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> we have application that uses to connect to databse we need to pass the password <span class="k">in</span> secured way...

so k8s secrets helps us to provide secrets to pod specification file

<span class="m">1</span>. Create a secret
<span class="m">2</span>. Inject the secret to the pod specification file


kubectl create secret generic app-secret --from-literal<span class="o">=</span><span class="nv">DB_password</span><span class="o">=</span>password123456

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl create secret generic app-secret --from-literal<span class="o">=</span><span class="nv">DB_password</span><span class="o">=</span>password123456 --dry-run<span class="o">=</span>client -o yaml &gt; create_secret.yaml
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl apply -f create_secret.yaml
secret/app-secret created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl describe secret app-secret 
Name:         app-secret
Namespace:    default
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;

Type:  Opaque

<span class="nv">Data</span>
<span class="o">====</span>
DB_password:  <span class="m">14</span> bytes
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 



MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl create secret generic db-secret --from-file<span class="o">=</span>app_secrets.properties 
secret/db-secret created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 



MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ <span class="nb">echo</span> <span class="s2">&quot;cGFzc3dvcmQxMjM0NTY=&quot;</span> <span class="p">|</span> base64 --decode
password123456MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$
password123456MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ <span class="nb">echo</span> -n <span class="s2">&quot;mysqluser&quot;</span> <span class="p">|</span> base64
bXlzcWx1c2Vy
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ <span class="nb">echo</span> -n <span class="s2">&quot;mysqldb&quot;</span> <span class="p">|</span> base64
<span class="nv">bXlzcWxkYg</span><span class="o">==</span>
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 

Secrets specification file:
-------------------------------------------&gt;
apiVersion: v1
data:
  DB_password: <span class="nv">cGFzc3dvcmQxMjM0NTY</span><span class="o">=</span>
  DB_user: bXlzcWx1c2Vy
  DB_Name: <span class="nv">bXlzcWxkYg</span><span class="o">==</span>
kind: Secret
metadata:
  name: app-secret




apiVersion: v1
kind: Pod
metadata:
  labels:
    run: nginx
  name: nginx
spec:
  containers:
  - image: nginx
    name: nginx
    ports:
    - containerPort: <span class="m">80</span>
    envFrom:
      - secretRef:
          name: db-secret
</pre></div>
</div>
</div>
<p>secretslabs</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">secretslabs</span><a class="headerlink" href="#id11" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@controlplane:~# kubectl get secrets
NAME                  TYPE                                  DATA   AGE
default-token-2sjz4   kubernetes.io/service-account-token   <span class="m">3</span>      10m
root@controlplane:~# kubectl describe secret default-token-2sjz4                   
Name:         default-token-2sjz4
Namespace:    default
Labels:       &lt;none&gt;
Annotations:  kubernetes.io/service-account.name: default
              kubernetes.io/service-account.uid: 90c997a2-3d2f-4d56-ae75-37f1950e68d8

Type:  kubernetes.io/service-account-token

<span class="nv">Data</span>
<span class="o">====</span>
ca.crt:     <span class="m">1066</span> bytes
namespace:  <span class="m">7</span> bytes
token:      eyJhbGciOiJSUzI1NiIsImtpZCI6ImhzVDRDcHQwdVFRYTZQSTFVYlRFcUZVX3JIbmxxWE9EcWxDWUpaUmpkdlUifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImRlZmF1bHQtdG9rZW4tMnNqejQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVmYXVsdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjkwYzk5N2EyLTNkMmYtNGQ1Ni1hZTc1LTM3ZjE5NTBlNjhkOCIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpkZWZhdWx0OmRlZmF1bHQifQ.thnQGTwepuST8EFY9lzMLDTqWZk87q_9nQ1sNMEaqxToxNgba7feuvjK7TQjIt9mwhSMRGym8LaztUAfP8QcYRjGlUR_hb91pJGsYA09d4XpYkycMUk5xpYPa6ppzndzkdYeLEaXZHXBbI6eESuolyjdvhlgDq9z-zjxc0wnnClW9xs_WYVacQx9j6qBRPonwlmNfykboK2SKQu-Uex4VPD2ksWVX_64mf7CmiGMbzqzO52V977vvsQFZ8VZ7465LTtaupgyj2wZ23I2R-85Uich22z3CX-wWKK3RmbGjSBjvQkH1E3Uu9CoBnFOBPJipM1PVkA5fXx1xQhMcQ5ROA
root@controlplane:~# 


root@controlplane:~# kubectl get all
NAME             READY   STATUS    RESTARTS   AGE
pod/mysql        <span class="m">1</span>/1     Running   <span class="m">0</span>          65s
pod/webapp-pod   <span class="m">1</span>/1     Running   <span class="m">0</span>          65s

NAME                     TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>          AGE
service/kubernetes       ClusterIP   <span class="m">10</span>.96.0.1        &lt;none&gt;        <span class="m">443</span>/TCP          13m
service/sql01            ClusterIP   <span class="m">10</span>.103.199.107   &lt;none&gt;        <span class="m">3306</span>/TCP         65s
service/webapp-service   NodePort    <span class="m">10</span>.98.251.213    &lt;none&gt;        <span class="m">8080</span>:30080/TCP   65s
root@controlplane:~# 



root@controlplane:~# kubectl create secret generic db-secret --from-literal<span class="o">=</span><span class="nv">DB_Host</span><span class="o">=</span>sql01 --dry-run<span class="o">=</span>client -o yaml &gt; db-secret.yaml
root@controlplane:~# vim db-secret.yaml 
root@controlplane:~# <span class="nb">echo</span> -n <span class="s2">&quot;root&quot;</span> <span class="p">|</span> base64
<span class="nv">cm9vdA</span><span class="o">==</span>
root@controlplane:~# <span class="nb">echo</span> -n <span class="s2">&quot;password123&quot;</span> <span class="p">|</span> base64
<span class="nv">cGFzc3dvcmQxMjM</span><span class="o">=</span>
root@controlplane:~# vim db-secret.yaml 
root@controlplane:~# vim db-secret.yaml 
root@controlplane:~# kubectl apply -f db-secret.yaml
secret/db-secret created
root@controlplane:~# 



root@controlplane:~# kubectl get secrets
NAME                  TYPE                                  DATA   AGE
db-secret             Opaque                                <span class="m">3</span>      5m5s
default-token-2sjz4   kubernetes.io/service-account-token   <span class="m">3</span>      22m
root@controlplane:~# 


root@controlplane:~# kubectl describe pod webapp-pod 
Name:         webapp-pod
Namespace:    default
Priority:     <span class="m">0</span>
Node:         controlplane/10.3.212.3
Start Time:   Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">03</span>:36:02 +0000
Labels:       <span class="nv">name</span><span class="o">=</span>webapp-pod
Annotations:  &lt;none&gt;
Status:       Running
IP:           <span class="m">10</span>.244.0.6
IPs:
  IP:  <span class="m">10</span>.244.0.6
Containers:
  webapp:
    Container ID:   docker://58376983854ab2f58fccca3623fb6f0a5b79439dfe2a5a8d612320a9cde9c901
    Image:          kodekloud/simple-webapp-mysql
    Image ID:       docker-pullable://kodekloud/simple-webapp-mysql@sha256:92943d2b3ea4a1db7c8a9529cd5786ae3b9999e0246ab665c29922e9800d1b41
    Port:           &lt;none&gt;
    Host Port:      &lt;none&gt;
    State:          Running
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">03</span>:36:41 +0000
    Ready:          True
    Restart Count:  <span class="m">0</span>
    Environment Variables from:
      db-secret   Secret  Optional: <span class="nb">false</span>
    Environment:  &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-2sjz4 <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-2sjz4:
    Type:        Secret <span class="o">(</span>a volume populated by a Secret<span class="o">)</span>
    SecretName:  default-token-2sjz4
    Optional:    <span class="nb">false</span>
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
                 node.kubernetes.io/unreachable:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
Events:
  Type    Reason   Age   From     Message
  ----    ------   ----  ----     -------
  Normal  Pulling  67s   kubelet  Pulling image <span class="s2">&quot;kodekloud/simple-webapp-mysql&quot;</span>
  Normal  Pulled   67s   kubelet  Successfully pulled image <span class="s2">&quot;kodekloud/simple-webapp-mysql&quot;</span> <span class="k">in</span> <span class="m">253</span>.892074ms
  Normal  Created  66s   kubelet  Created container webapp
  Normal  Started  65s   kubelet  Started container webapp
root@controlplane:~# 
</pre></div>
</div>
</div>
<p>multicontainer_pods</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">multicontainer_pods</span><a class="headerlink" href="#id12" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In a single pod we can use two containers like <span class="m">1</span>.WEB Server and <span class="m">2</span>.Logging Agent
can share same storage and network, can communicate via localhost

MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl run nginx --image<span class="o">=</span>nginx --dry-run<span class="o">=</span>client -o yaml &gt; multi_container_pod.yaml
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl apply -f multi_container_pod.yaml
pod/nginx created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl describe pod nginx
Name:         nginx
Namespace:    default
Priority:     <span class="m">0</span>
Node:         minikube/192.168.49.2
Start Time:   Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">12</span>:32:17 +0800
Labels:       <span class="nv">run</span><span class="o">=</span>nginx
Annotations:  &lt;none&gt;
Status:       Pending
IP:           
IPs:          &lt;none&gt;
Containers:
  nginx:
    Container ID:   
    Image:          nginx
    Image ID:       
    Port:           &lt;none&gt;
    Host Port:      &lt;none&gt;
    State:          Waiting
      Reason:       ContainerCreating
    Ready:          False
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-lxpp9 <span class="o">(</span>ro<span class="o">)</span>
  busybox:
    Container ID:   
    Image:          busybox
    Image ID:       
    Port:           &lt;none&gt;
    Host Port:      &lt;none&gt;
    State:          Waiting
      Reason:       ContainerCreating
    Ready:          False
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-lxpp9 <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  default-token-lxpp9:
    Type:        Secret <span class="o">(</span>a volume populated by a Secret<span class="o">)</span>
    SecretName:  default-token-lxpp9
    Optional:    <span class="nb">false</span>
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
                 node.kubernetes.io/unreachable:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  15s   default-scheduler  Successfully assigned default/nginx to minikube
  Normal  Pulling    14s   kubelet            Pulling image <span class="s2">&quot;nginx&quot;</span>
  Normal  Pulled     8s    kubelet            Successfully pulled image <span class="s2">&quot;nginx&quot;</span> <span class="k">in</span> <span class="m">6</span>.110889s
  Normal  Created    8s    kubelet            Created container nginx
  Normal  Started    8s    kubelet            Started container nginx
  Normal  Pulling    8s    kubelet            Pulling image <span class="s2">&quot;busybox&quot;</span>
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 
</pre></div>
</div>
</div>
<p>multicontainer_podslabs</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">multicontainer_podslabs</span><a class="headerlink" href="#id13" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@controlplane:~# kubectl get pods
NAME        READY   STATUS              RESTARTS   AGE
app         <span class="m">0</span>/1     ContainerCreating   <span class="m">0</span>          44s
blue        <span class="m">0</span>/2     ContainerCreating   <span class="m">0</span>          5s
fluent-ui   <span class="m">1</span>/1     Running             <span class="m">0</span>          45s
red         <span class="m">0</span>/3     ContainerCreating   <span class="m">0</span>          34s
root@controlplane:~# kubectl describe pod blue
Name:         blue
Namespace:    default
Priority:     <span class="m">0</span>
Node:         controlplane/10.6.30.8
Start Time:   Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">04</span>:34:53 +0000
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
Status:       Pending
IP:           
IPs:          &lt;none&gt;
Containers:
  teal:
    Container ID:  
    Image:         busybox
    Image ID:      
    Port:          &lt;none&gt;
    Host Port:     &lt;none&gt;
    Command:
      sleep
      <span class="m">4500</span>
    State:          Waiting
      Reason:       ContainerCreating
    Ready:          False
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-9gh8c <span class="o">(</span>ro<span class="o">)</span>
  navy:
    Container ID:  
    Image:         busybox
    Image ID:      
    Port:          &lt;none&gt;
    Host Port:     &lt;none&gt;
    Command:
      sleep
      <span class="m">4500</span>
    State:          Waiting
      Reason:       ContainerCreating
    Ready:          False
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-9gh8c <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  default-token-9gh8c:
    Type:        Secret <span class="o">(</span>a volume populated by a Secret<span class="o">)</span>
    SecretName:  default-token-9gh8c
    Optional:    <span class="nb">false</span>
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
                 node.kubernetes.io/unreachable:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  23s   default-scheduler  Successfully assigned default/blue to controlplane
  Normal  Pulling    20s   kubelet            Pulling image <span class="s2">&quot;busybox&quot;</span>
root@controlplane:~# 


Create a multi-container pod with <span class="m">2</span> containers.

Name: yellow
Container <span class="m">1</span> Name: lemon
Container <span class="m">1</span> Image: busybox
Container <span class="m">2</span> Name: gold
Container <span class="m">2</span> Image: redi

If the pod goes into the crashloopbackoff <span class="k">then</span> add sleep <span class="m">1000</span> <span class="k">in</span> the lemon container.

root@controlplane:~# cat multi_contianer.yaml
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: null
  labels:
    run: yellow
  name: yellow
spec:
  containers:
  - image: busybox
    name: lemon 
    command:
     - <span class="s2">&quot;sleep&quot;</span>
     - <span class="s2">&quot;1000&quot;</span>
  - image: redis
    name: gold
root@controlplane:~# 


root@controlplane:~# kubectl apply -f multi_contianer.yaml
pod/yellow created
root@controlplane:~# 


root@controlplane:~# kubectl describe pod yellow
Name:         yellow
Namespace:    default
Priority:     <span class="m">0</span>
Node:         controlplane/10.6.30.8
Start Time:   Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">04</span>:46:45 +0000
Labels:       <span class="nv">run</span><span class="o">=</span>yellow
Annotations:  &lt;none&gt;
Status:       Running
IP:           <span class="m">10</span>.244.0.11
IPs:
  IP:  <span class="m">10</span>.244.0.11
Containers:
  lemon:
    Container ID:  docker://d2ac7da68aeeddc4a7661576c0d776ad4ae8506e78ae757a1243d90d1eab1bc9
    Image:         busybox
    Image ID:      docker-pullable://busybox@sha256:52f73a0a43a16cf37cd0720c90887ce972fe60ee06a687ee71fb93a7ca601df7
    Port:          &lt;none&gt;
    Host Port:     &lt;none&gt;
    Command:
      sleep
      <span class="m">1000</span>
    State:          Running
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">04</span>:46:49 +0000
    Ready:          True
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-9gh8c <span class="o">(</span>ro<span class="o">)</span>
  gold:
    Container ID:   docker://57bec715dc98f4bd723f17b0170f4467ca10a7496d0d518ec79781c9e29b7555
    Image:          redis
    Image ID:       docker-pullable://redis@sha256:e595e79c05c7690f50ef0136acc9d932d65d8b2ce7915d26a68ca3fb41a7db61
    Port:           &lt;none&gt;
    Host Port:      &lt;none&gt;
    State:          Running
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">04</span>:47:01 +0000
    Ready:          True
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-9gh8c <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-9gh8c:
    Type:        Secret <span class="o">(</span>a volume populated by a Secret<span class="o">)</span>
    SecretName:  default-token-9gh8c
    Optional:    <span class="nb">false</span>
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
                 node.kubernetes.io/unreachable:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  28s   default-scheduler  Successfully assigned default/yellow to controlplane
  Normal  Pulling    25s   kubelet            Pulling image <span class="s2">&quot;busybox&quot;</span>
  Normal  Pulled     25s   kubelet            Successfully pulled image <span class="s2">&quot;busybox&quot;</span> <span class="k">in</span> <span class="m">264</span>.575064ms
  Normal  Created    25s   kubelet            Created container lemon
  Normal  Started    24s   kubelet            Started container lemon
  Normal  Pulling    24s   kubelet            Pulling image <span class="s2">&quot;redis&quot;</span>
  Normal  Pulled     13s   kubelet            Successfully pulled image <span class="s2">&quot;redis&quot;</span> <span class="k">in</span> <span class="m">11</span>.216716468s
  Normal  Created    12s   kubelet            Created container gold
  Normal  Started    12s   kubelet            Started container gold
root@controlplane:~# 


root@controlplane:~# kubectl get all -n elastic-stack
NAME                 READY   STATUS    RESTARTS   AGE
pod/app              <span class="m">1</span>/1     Running   <span class="m">0</span>          14m
pod/elastic-search   <span class="m">1</span>/1     Running   <span class="m">0</span>          14m
pod/kibana           <span class="m">1</span>/1     Running   <span class="m">0</span>          14m

NAME                    TYPE       CLUSTER-IP       EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>                         AGE
service/elasticsearch   NodePort   <span class="m">10</span>.102.56.7      &lt;none&gt;        <span class="m">9200</span>:30200/TCP,9300:30300/TCP   14m
service/kibana          NodePort   <span class="m">10</span>.109.206.204   &lt;none&gt;        <span class="m">5601</span>:30601/TCP                  14m
root@controlplane:~# 


root@controlplane:~# kubectl logs kibana -n elastic-stack <span class="p">|</span> tail
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;log&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:37:42Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[</span><span class="s2">&quot;status&quot;</span>,<span class="s2">&quot;plugin:logstash@6.4.2&quot;</span>,<span class="s2">&quot;info&quot;</span><span class="o">]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;state&quot;</span>:<span class="s2">&quot;green&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Status changed from red to green - Ready&quot;</span>,<span class="s2">&quot;prevState&quot;</span>:<span class="s2">&quot;red&quot;</span>,<span class="s2">&quot;prevMsg&quot;</span>:<span class="s2">&quot;Request Timeout after 3000ms&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;log&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:37:42Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[</span><span class="s2">&quot;status&quot;</span>,<span class="s2">&quot;plugin:reporting@6.4.2&quot;</span>,<span class="s2">&quot;info&quot;</span><span class="o">]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;state&quot;</span>:<span class="s2">&quot;green&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Status changed from red to green - Ready&quot;</span>,<span class="s2">&quot;prevState&quot;</span>:<span class="s2">&quot;red&quot;</span>,<span class="s2">&quot;prevMsg&quot;</span>:<span class="s2">&quot;Request Timeout after 3000ms&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;log&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:37:42Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[</span><span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;monitoring-ui&quot;</span>,<span class="s2">&quot;kibana-monitoring&quot;</span><span class="o">]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Starting monitoring stats collection&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;log&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:37:42Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[</span><span class="s2">&quot;status&quot;</span>,<span class="s2">&quot;plugin:security@6.4.2&quot;</span>,<span class="s2">&quot;info&quot;</span><span class="o">]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;state&quot;</span>:<span class="s2">&quot;green&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Status changed from red to green - Ready&quot;</span>,<span class="s2">&quot;prevState&quot;</span>:<span class="s2">&quot;red&quot;</span>,<span class="s2">&quot;prevMsg&quot;</span>:<span class="s2">&quot;Request Timeout after 3000ms&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;log&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:37:43Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[</span><span class="s2">&quot;license&quot;</span>,<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;xpack&quot;</span><span class="o">]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Imported license information from Elasticsearch for the [monitoring] cluster: mode: basic | status: active&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;log&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:37:45Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[</span><span class="s2">&quot;status&quot;</span>,<span class="s2">&quot;plugin:elasticsearch@6.4.2&quot;</span>,<span class="s2">&quot;info&quot;</span><span class="o">]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;state&quot;</span>:<span class="s2">&quot;green&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Status changed from red to green - Ready&quot;</span>,<span class="s2">&quot;prevState&quot;</span>:<span class="s2">&quot;red&quot;</span>,<span class="s2">&quot;prevMsg&quot;</span>:<span class="s2">&quot;Request Timeout after 3000ms&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;log&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:37:56Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[</span><span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;http&quot;</span>,<span class="s2">&quot;server&quot;</span>,<span class="s2">&quot;listening&quot;</span><span class="o">]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Server running at http://0:5601&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;response&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:37:57Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;head&quot;</span>,<span class="s2">&quot;statusCode&quot;</span>:200,<span class="s2">&quot;req&quot;</span>:<span class="o">{</span><span class="s2">&quot;url&quot;</span>:<span class="s2">&quot;/&quot;</span>,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;head&quot;</span>,<span class="s2">&quot;headers&quot;</span>:<span class="o">{</span><span class="s2">&quot;host&quot;</span>:<span class="s2">&quot;0.0.0.0:30601&quot;</span>,<span class="s2">&quot;user-agent&quot;</span>:<span class="s2">&quot;curl/7.58.0&quot;</span>,<span class="s2">&quot;accept&quot;</span>:<span class="s2">&quot;*/*&quot;</span><span class="o">}</span>,<span class="s2">&quot;remoteAddress&quot;</span>:<span class="s2">&quot;10.244.0.1&quot;</span>,<span class="s2">&quot;userAgent&quot;</span>:<span class="s2">&quot;10.244.0.1&quot;</span><span class="o">}</span>,<span class="s2">&quot;res&quot;</span>:<span class="o">{</span><span class="s2">&quot;statusCode&quot;</span>:200,<span class="s2">&quot;responseTime&quot;</span>:37,<span class="s2">&quot;contentLength&quot;</span>:9<span class="o">}</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;HEAD / 200 37ms - 9.0B&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;response&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:38:07Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;post&quot;</span>,<span class="s2">&quot;statusCode&quot;</span>:200,<span class="s2">&quot;req&quot;</span>:<span class="o">{</span><span class="s2">&quot;url&quot;</span>:<span class="s2">&quot;/api/saved_objects/index-pattern/filebeat-*?overwrite=false&quot;</span>,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;post&quot;</span>,<span class="s2">&quot;headers&quot;</span>:<span class="o">{</span><span class="s2">&quot;host&quot;</span>:<span class="s2">&quot;0.0.0.0:30601&quot;</span>,<span class="s2">&quot;user-agent&quot;</span>:<span class="s2">&quot;curl/7.58.0&quot;</span>,<span class="s2">&quot;accept&quot;</span>:<span class="s2">&quot;*/*&quot;</span>,<span class="s2">&quot;content-type&quot;</span>:<span class="s2">&quot;application/json&quot;</span>,<span class="s2">&quot;kbn-xsrf&quot;</span>:<span class="s2">&quot;athing&quot;</span>,<span class="s2">&quot;content-length&quot;</span>:<span class="s2">&quot;66&quot;</span><span class="o">}</span>,<span class="s2">&quot;remoteAddress&quot;</span>:<span class="s2">&quot;10.244.0.1&quot;</span>,<span class="s2">&quot;userAgent&quot;</span>:<span class="s2">&quot;10.244.0.1&quot;</span><span class="o">}</span>,<span class="s2">&quot;res&quot;</span>:<span class="o">{</span><span class="s2">&quot;statusCode&quot;</span>:200,<span class="s2">&quot;responseTime&quot;</span>:1425,<span class="s2">&quot;contentLength&quot;</span>:9<span class="o">}</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;POST /api/saved_objects/index-pattern/filebeat-*?overwrite=false 200 1425ms - 9.0B&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;type&quot;</span>:<span class="s2">&quot;response&quot;</span>,<span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2021-09-21T04:38:08Z&quot;</span>,<span class="s2">&quot;tags&quot;</span>:<span class="o">[]</span>,<span class="s2">&quot;pid&quot;</span>:1,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;post&quot;</span>,<span class="s2">&quot;statusCode&quot;</span>:200,<span class="s2">&quot;req&quot;</span>:<span class="o">{</span><span class="s2">&quot;url&quot;</span>:<span class="s2">&quot;/api/kibana/settings/defaultIndex&quot;</span>,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;post&quot;</span>,<span class="s2">&quot;headers&quot;</span>:<span class="o">{</span><span class="s2">&quot;host&quot;</span>:<span class="s2">&quot;0.0.0.0:30601&quot;</span>,<span class="s2">&quot;user-agent&quot;</span>:<span class="s2">&quot;curl/7.58.0&quot;</span>,<span class="s2">&quot;accept&quot;</span>:<span class="s2">&quot;*/*&quot;</span>,<span class="s2">&quot;content-type&quot;</span>:<span class="s2">&quot;application/json&quot;</span>,<span class="s2">&quot;kbn-xsrf&quot;</span>:<span class="s2">&quot;anytng&quot;</span>,<span class="s2">&quot;content-length&quot;</span>:<span class="s2">&quot;22&quot;</span><span class="o">}</span>,<span class="s2">&quot;remoteAddress&quot;</span>:<span class="s2">&quot;10.244.0.1&quot;</span>,<span class="s2">&quot;userAgent&quot;</span>:<span class="s2">&quot;10.244.0.1&quot;</span><span class="o">}</span>,<span class="s2">&quot;res&quot;</span>:<span class="o">{</span><span class="s2">&quot;statusCode&quot;</span>:200,<span class="s2">&quot;responseTime&quot;</span>:2068,<span class="s2">&quot;contentLength&quot;</span>:9<span class="o">}</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;POST /api/kibana/settings/defaultIndex 200 2068ms - 9.0B&quot;</span><span class="o">}</span>
root@controlplane:~# 


root@controlplane:~# kubectl logs elastic-search -n elastic-stack <span class="p">|</span> tail
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:07,531<span class="o">][</span>INFO <span class="o">][</span>o.e.c.m.MetaDataCreateIndexService<span class="o">]</span> <span class="o">[</span>gTtv6_7<span class="o">]</span> <span class="o">[</span>.kibana<span class="o">]</span> creating index, cause <span class="o">[</span>auto<span class="o">(</span>bulk api<span class="o">)]</span>, templates <span class="o">[</span>kibana_index_template:.kibana<span class="o">]</span>, shards <span class="o">[</span><span class="m">1</span><span class="o">]</span>/<span class="o">[</span><span class="m">1</span><span class="o">]</span>, mappings <span class="o">[</span>doc<span class="o">]</span>
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:07,541<span class="o">][</span>INFO <span class="o">][</span>o.e.c.r.a.AllocationService<span class="o">]</span> <span class="o">[</span>gTtv6_7<span class="o">]</span> updating number_of_replicas to <span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="k">for</span> indices <span class="o">[</span>.kibana<span class="o">]</span>
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:08,123<span class="o">][</span>INFO <span class="o">][</span>o.e.c.r.a.AllocationService<span class="o">]</span> <span class="o">[</span>gTtv6_7<span class="o">]</span> Cluster health status changed from <span class="o">[</span>YELLOW<span class="o">]</span> to <span class="o">[</span>GREEN<span class="o">]</span> <span class="o">(</span>reason: <span class="o">[</span>shards started <span class="o">[[</span>.kibana<span class="o">][</span><span class="m">0</span><span class="o">]]</span> ...<span class="o">])</span>.
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:08,844<span class="o">][</span>WARN <span class="o">][</span>o.e.d.a.a.i.t.p.PutIndexTemplateRequest<span class="o">]</span> Deprecated field <span class="o">[</span>template<span class="o">]</span> used, replaced by <span class="o">[</span>index_patterns<span class="o">]</span>
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:08,920<span class="o">][</span>INFO <span class="o">][</span>o.e.c.m.MetaDataIndexTemplateService<span class="o">]</span> <span class="o">[</span>gTtv6_7<span class="o">]</span> adding template <span class="o">[</span>kibana_index_template:.kibana<span class="o">]</span> <span class="k">for</span> index patterns <span class="o">[</span>.kibana<span class="o">]</span>
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:09,119<span class="o">][</span>WARN <span class="o">][</span>o.e.d.a.a.i.t.p.PutIndexTemplateRequest<span class="o">]</span> Deprecated field <span class="o">[</span>template<span class="o">]</span> used, replaced by <span class="o">[</span>index_patterns<span class="o">]</span>
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:09,127<span class="o">][</span>INFO <span class="o">][</span>o.e.c.m.MetaDataIndexTemplateService<span class="o">]</span> <span class="o">[</span>gTtv6_7<span class="o">]</span> adding template <span class="o">[</span>kibana_index_template:.kibana<span class="o">]</span> <span class="k">for</span> index patterns <span class="o">[</span>.kibana<span class="o">]</span>
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:09,836<span class="o">][</span>WARN <span class="o">][</span>o.e.d.a.a.i.t.p.PutIndexTemplateRequest<span class="o">]</span> Deprecated field <span class="o">[</span>template<span class="o">]</span> used, replaced by <span class="o">[</span>index_patterns<span class="o">]</span>
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:09,845<span class="o">][</span>INFO <span class="o">][</span>o.e.c.m.MetaDataIndexTemplateService<span class="o">]</span> <span class="o">[</span>gTtv6_7<span class="o">]</span> adding template <span class="o">[</span>kibana_index_template:.kibana<span class="o">]</span> <span class="k">for</span> index patterns <span class="o">[</span>.kibana<span class="o">]</span>
<span class="o">[</span><span class="m">2021</span>-09-21T04:38:09,923<span class="o">][</span>INFO <span class="o">][</span>o.e.c.m.MetaDataMappingService<span class="o">]</span> <span class="o">[</span>gTtv6_7<span class="o">]</span> <span class="o">[</span>.kibana/3bcSc1d9S1CcqH-FLhLPaw<span class="o">]</span> update_mapping <span class="o">[</span>doc<span class="o">]</span>
root@controlplane:~# 



Edit the pod to add a sidecar container to send logs to Elastic Search. Mount the log volume to the sidecar container.
Only add a new container.


Name: app
Container Name: sidecar
Container Image: kodekloud/filebeat-configured
Volume Mount: log-volume
Mount Path: /var/log/event-simulator/
Existing Container Name: app
Existing Container Image: kodekloud/event-simulator


spec:
  containers:
  - image: kodekloud/filebeat-configured
    name: sidecar
    volumeMounts:
    - mountPath: /var/log/event-simulator/
      name: log-volume
  - image: kodekloud/event-simulator
    imagePullPolicy: Always
    name: app
    resources: <span class="o">{}</span>
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /log
      name: log-volume
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: default-token-9tt4w
      readOnly: <span class="nb">true</span>




root@controlplane:~# kubectl edit pod app -n elastic-stack
error: pods <span class="s2">&quot;app&quot;</span> is invalid
A copy of your changes has been stored to <span class="s2">&quot;/tmp/kubectl-edit-cao9c.yaml&quot;</span>
error: Edit cancelled, no valid changes were saved.
root@controlplane:~# kubectl edit pod app -n elastic-stack
Edit cancelled, no changes made.
root@controlplane:~# kubectl delete pod app -n elastic-stack
pod <span class="s2">&quot;app&quot;</span> deleted
kubectl apply -f /tmp/kubectl-edit-cao9c.yaml
root@controlplane:~# kubectl apply -f /tmp/kubectl-edit-cao9c.yaml
pod/app created
root@controlplane:~# 
</pre></div>
</div>
</div>
<p>initcontainers</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">initcontainers</span><a class="headerlink" href="#id14" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> we want to run a process that runs to completion <span class="k">in</span> a container. 
For example a process that pulls a code or binary from a repository that will be used by the main web application.


That is a task that will be run only one <span class="nb">time</span> when the pod is first created. 
Or a process that waits <span class="k">for</span> an external service or database to be up before the actual application starts. 
That’s where initContainers comes <span class="k">in</span>



MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl apply -f <span class="m">14</span>.demo_init_container_example.yaml 
pod/bkapp-pod created
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl get pods
NAME        READY   STATUS             RESTARTS   AGE
bkapp-pod   <span class="m">0</span>/1     Init:Error         <span class="m">0</span>          10s
nginx       <span class="m">1</span>/2     CrashLoopBackOff   <span class="m">16</span>         59m
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ kubectl describe pod bkapp-pod
Name:         bkapp-pod
Namespace:    default
Priority:     <span class="m">0</span>
Node:         minikube/192.168.49.2
Start Time:   Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">13</span>:31:40 +0800
Labels:       <span class="nv">app</span><span class="o">=</span>bkapp
Annotations:  &lt;none&gt;
Status:       Pending
IP:           <span class="m">172</span>.17.0.4
IPs:
  IP:  <span class="m">172</span>.17.0.4
Init Containers:
  init-bkservice:
    Container ID:  docker://56d6fdf4e53adf06947b10fa1457c2ae266ba5e3110a99a10091af8d9ae09101
    Image:         busybox
    Image ID:      docker-pullable://busybox@sha256:52f73a0a43a16cf37cd0720c90887ce972fe60ee06a687ee71fb93a7ca601df7
    Port:          &lt;none&gt;
    Host Port:     &lt;none&gt;
    Command:
      sh
      -c
      git clone git@github.com:Bharathkumarraju/certified_kubernetes_administrator.git<span class="p">;</span>
    State:          Terminated
      Reason:       Error
      Exit Code:    <span class="m">127</span>
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">13</span>:32:12 +0800
      Finished:     Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">13</span>:32:12 +0800
    Last State:     Terminated
      Reason:       Error
      Exit Code:    <span class="m">127</span>
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">13</span>:31:50 +0800
      Finished:     Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">13</span>:31:50 +0800
    Ready:          False
    Restart Count:  <span class="m">2</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-lxpp9 <span class="o">(</span>ro<span class="o">)</span>
  init-bkdb:
    Container ID:  
    Image:         busybox
    Image ID:      
    Port:          &lt;none&gt;
    Host Port:     &lt;none&gt;
    Command:
      sh
      -c
      <span class="k">until</span> nslookup mydb<span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> waiting <span class="k">for</span> mydb<span class="p">;</span> sleep <span class="m">2</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span>
    State:          Waiting
      Reason:       PodInitializing
    Ready:          False
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-lxpp9 <span class="o">(</span>ro<span class="o">)</span>
Containers:
  bkapp-container:
    Container ID:  
    Image:         busybox:1.28
    Image ID:      
    Port:          &lt;none&gt;
    Host Port:     &lt;none&gt;
    Command:
      sh
      -c
      <span class="nb">echo</span> the app is running!! <span class="o">&amp;&amp;</span> sleep <span class="m">3600</span>
    State:          Waiting
      Reason:       PodInitializing
    Ready:          False
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-lxpp9 <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type              Status
  Initialized       False 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  default-token-lxpp9:
    Type:        Secret <span class="o">(</span>a volume populated by a Secret<span class="o">)</span>
    SecretName:  default-token-lxpp9
    Optional:    <span class="nb">false</span>
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
                 node.kubernetes.io/unreachable:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
Events:
  Type     Reason     Age                From               Message
  ----     ------     ----               ----               -------
  Normal   Scheduled  37s                default-scheduler  Successfully assigned default/bkapp-pod to minikube
  Normal   Pulled     32s                kubelet            Successfully pulled image <span class="s2">&quot;busybox&quot;</span> <span class="k">in</span> <span class="m">4</span>.0991627s
  Normal   Pulled     27s                kubelet            Successfully pulled image <span class="s2">&quot;busybox&quot;</span> <span class="k">in</span> <span class="m">3</span>.8770697s
  Normal   Pulling    10s <span class="o">(</span>x3 over 36s<span class="o">)</span>  kubelet            Pulling image <span class="s2">&quot;busybox&quot;</span>
  Normal   Created    5s <span class="o">(</span>x3 over 32s<span class="o">)</span>   kubelet            Created container init-bkservice
  Normal   Started    5s <span class="o">(</span>x3 over 31s<span class="o">)</span>   kubelet            Started container init-bkservice
  Normal   Pulled     5s                 kubelet            Successfully pulled image <span class="s2">&quot;busybox&quot;</span> <span class="k">in</span> <span class="m">5</span>.2892604s
  Warning  BackOff    4s <span class="o">(</span>x3 over 25s<span class="o">)</span>   kubelet            Back-off restarting failed container
MacBook-Pro:4.Application_lifecycle_mgmt bharathdasaraju$ 
</pre></div>
</div>
</div>
<p>initcontainerlabs</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">initcontainerlabs</span><a class="headerlink" href="#id15" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@controlplane:~# kubectl get pods
NAME    READY   STATUS    RESTARTS   AGE
blue    <span class="m">1</span>/1     Running   <span class="m">0</span>          103s
green   <span class="m">2</span>/2     Running   <span class="m">0</span>          103s
red     <span class="m">1</span>/1     Running   <span class="m">0</span>          103s
root@controlplane:~#


root@controlplane:~# kubectl describe pod blue                 
Name:         blue
Namespace:    default
Priority:     <span class="m">0</span>
Node:         controlplane/10.8.36.3
Start Time:   Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">05</span>:35:44 +0000
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
Status:       Running
IP:           <span class="m">10</span>.244.0.6
IPs:
  IP:  <span class="m">10</span>.244.0.6
Init Containers:
  init-myservice:
    Container ID:  docker://cb6b4b67652aaab333bc31891c817b30804888aa1070f310d8bcd278d65e93ef
    Image:         busybox
    Image ID:      docker-pullable://busybox@sha256:52f73a0a43a16cf37cd0720c90887ce972fe60ee06a687ee71fb93a7ca601df7
    Port:          &lt;none&gt;
    Host Port:     &lt;none&gt;
    Command:
      sh
      -c
      sleep <span class="m">5</span>
    State:          Terminated
      Reason:       Completed
      Exit Code:    <span class="m">0</span>
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">05</span>:35:53 +0000
      Finished:     Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">05</span>:35:58 +0000
    Ready:          True
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-5lj6j <span class="o">(</span>ro<span class="o">)</span>
Containers:
  green-container-1:
    Container ID:  docker://e4e921212ffdb2dde1ea8823172327b8cdce5ff51dbc4cdeca704ef5b7280d5a
    Image:         busybox:1.28
    Image ID:      docker-pullable://busybox@sha256:141c253bc4c3fd0a201d32dc1f493bcf3fff003b6df416dea4f41046e0f37d47
    Port:          &lt;none&gt;
    Host Port:     &lt;none&gt;
    Command:
      sh
      -c
      <span class="nb">echo</span> The app is running! <span class="o">&amp;&amp;</span> sleep <span class="m">3600</span>
    State:          Running
      Started:      Tue, <span class="m">21</span> Sep <span class="m">2021</span> <span class="m">05</span>:35:59 +0000
    Ready:          True
    Restart Count:  <span class="m">0</span>
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-5lj6j <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-5lj6j:
    Type:        Secret <span class="o">(</span>a volume populated by a Secret<span class="o">)</span>
    SecretName:  default-token-5lj6j
    Optional:    <span class="nb">false</span>
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
                 node.kubernetes.io/unreachable:NoExecute <span class="nv">op</span><span class="o">=</span>Exists <span class="k">for</span> 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  67s   default-scheduler  Successfully assigned default/blue to controlplane
  Normal  Pulling    63s   kubelet            Pulling image <span class="s2">&quot;busybox&quot;</span>
  Normal  Pulled     59s   kubelet            Successfully pulled image <span class="s2">&quot;busybox&quot;</span> <span class="k">in</span> <span class="m">3</span>.086779983s
  Normal  Created    59s   kubelet            Created container init-myservice
  Normal  Started    58s   kubelet            Started container init-myservice
  Normal  Pulled     53s   kubelet            Container image <span class="s2">&quot;busybox:1.28&quot;</span> already present on machine
  Normal  Created    53s   kubelet            Created container green-container-1
  Normal  Started    52s   kubelet            Started container green-container-1
root@controlplane:~#



root@controlplane:~# kubectl get pods
NAME     READY   STATUS     RESTARTS   AGE
blue     <span class="m">1</span>/1     Running    <span class="m">0</span>          3m2s
green    <span class="m">2</span>/2     Running    <span class="m">0</span>          3m2s
purple   <span class="m">0</span>/1     Init:0/2   <span class="m">0</span>          9s
red      <span class="m">1</span>/1     Running    <span class="m">0</span>          3m2s
root@controlplane:~# 
</pre></div>
</div>
</div>
<div class="section" id="yaml-specifications-for-application">
<h2>yaml specifications for application<a class="headerlink" href="#yaml-specifications-for-application" title="Permalink to this headline"></a></h2>
<p>poddefinition</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">poddefinition</span><a class="headerlink" href="#id16" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-sleeper</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-sleeper</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-sleeper-entry-cmd</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-sleeper</span>
    <span class="nt">command</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;sleep2.0&quot;</span><span class="p p-Indicator">]</span>  <span class="c1"># Overwrites the ENTRYPOINT filed in docker</span>
    <span class="nt">args</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;35&quot;</span><span class="p p-Indicator">]</span>  <span class="c1">#Overwrites the CMD field in docker</span>
</pre></div>
</div>
</div>
<p>overwritepodargs</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">overwritepodargs</span><a class="headerlink" href="#id17" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-green</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-green</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kodekloud/webapp-color</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-green</span>
    <span class="nt">args</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;--color&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;green&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
<p>envs_in_poddefinition</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">envs_in_poddefinition</span><a class="headerlink" href="#id18" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-green</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-green</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kodekloud/webapp-color</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-green</span>
    <span class="nt">env</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">APP_COLOR</span>
       <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pink</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">APP_VERSION</span>
       <span class="nt">valueFrom</span><span class="p">:</span>
         <span class="nt">configMapKeyRef</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">APP_BUILD</span>
       <span class="nt">valueFrom</span><span class="p">:</span>
         <span class="nt">secretKeyRef</span><span class="p">:</span>
</pre></div>
</div>
</div>
<p>app_config_properties</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">app_config_properties</span><a class="headerlink" href="#id19" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">APP_COLOR</span><span class="o">=</span>red
<span class="nv">APP_BUILD</span><span class="o">=</span>preprod
<span class="nv">APP_VERSION</span><span class="o">=</span><span class="m">2</span>.0
</pre></div>
</div>
</div>
<p>configmap</p>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">configmap</span><a class="headerlink" href="#id20" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bkconfigmap</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bkapplication</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">APP_COLOR</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pink</span>
  <span class="nt">APP_BUID</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dev</span>
  <span class="nt">APP_VERSION</span><span class="p">:</span> <span class="s">&quot;3.0&quot;</span>
</pre></div>
</div>
</div>
<p>configmap_in_pods</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">configmap_in_pods</span><a class="headerlink" href="#id21" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">creationTimestamp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
    <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
    <span class="nt">envFrom</span><span class="p">:</span>                <span class="c1"># can use entire configmap like this</span>
      <span class="p p-Indicator">-</span> <span class="nt">configMapRef</span><span class="p">:</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bkconfigmap</span>
    <span class="nt">env</span><span class="p">:</span>                  <span class="c1"># can specify the single key from  the configMap</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">APP_COLOR</span>
        <span class="nt">valueFrom</span><span class="p">:</span>
          <span class="nt">configMapKeyRef</span><span class="p">:</span>
            <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bkconfigmap</span>
            <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">APP_COLOR</span>
    <span class="nt">volumes</span><span class="p">:</span>               <span class="c1"># Can use configMap as a Separate Volume as well</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">app-config-volume</span>
        <span class="nt">configMap</span><span class="p">:</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bkconfigmap</span>
        
</pre></div>
</div>
</div>
<p>webconfigmap</p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">webconfigmap</span><a class="headerlink" href="#id22" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">APP_COLOR</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">darkblue</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">creationTimestamp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-config-map</span>
</pre></div>
</div>
</div>
<p>configmap_use_envFrom</p>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">configmap_use_envFrom</span><a class="headerlink" href="#id23" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-color</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-color</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">envFrom</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">configMapRef</span><span class="p">:</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-config-map</span>
      <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kodekloud/webapp-color</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webapp-color</span>
</pre></div>
</div>
</div>
<p>createsecrets</p>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">createsecrets</span><a class="headerlink" href="#id24" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">DB_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cGFzc3dvcmQxMjM0NTY=</span>
  <span class="nt">DB_user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bXlzcWx1c2Vy</span>
  <span class="nt">DB_Name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bXlzcWxkYg==</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">app-secret</span>
</pre></div>
</div>
</div>
<p>app_secrets</p>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">app_secrets</span><a class="headerlink" href="#id25" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">DB_HOST</span><span class="o">=</span>mysql
<span class="nv">DB_USER</span><span class="o">=</span>root
<span class="nv">DB_Password</span><span class="o">=</span>password12345a
</pre></div>
</div>
</div>
<p>usesecrets_in_app</p>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">usesecrets_in_app</span><a class="headerlink" href="#id26" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
    <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
    <span class="nt">envFrom</span><span class="p">:</span>                    <span class="c1"># whole secret as secretRef</span>
      <span class="p p-Indicator">-</span> <span class="nt">secretRef</span><span class="p">:</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">db-secret</span>
    <span class="nt">env</span><span class="p">:</span>                       <span class="c1"># Add a single secret env </span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DB_Password</span>
        <span class="nt">valueFrom</span><span class="p">:</span>
          <span class="nt">secretKeyRef</span><span class="p">:</span>
            <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DB_password</span>
            <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">db-secret</span>
    <span class="nt">volumes</span><span class="p">:</span>                          <span class="c1"># Add whole secret object as a volume</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">db-secret-volume</span>
        <span class="nt">secret</span><span class="p">:</span>
          <span class="nt">secretName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">db-secret</span>
</pre></div>
</div>
</div>
<p>multicontainerpods</p>
<div class="literal-block-wrapper docutils container" id="id27">
<div class="code-block-caption"><span class="caption-text">multicontainerpods</span><a class="headerlink" href="#id27" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
  <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">busybox</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">busybox</span>
</pre></div>
</div>
</div>
<p>configure_sidecar</p>
<div class="literal-block-wrapper docutils container" id="id28">
<div class="code-block-caption"><span class="caption-text">configure_sidecar</span><a class="headerlink" href="#id28" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">app</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">elastic-stack</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">app</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">app</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kodekloud/event-simulator</span>
    <span class="nt">volumeMounts</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/log</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">log-volume</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sidecar</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kodekloud/filebeat-configured</span>
    <span class="nt">volumeMounts</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/log/event-simulator/</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">log-volume</span>

  <span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">log-volume</span>
    <span class="nt">hostPath</span><span class="p">:</span>
      <span class="c1"># directory location on host</span>
      <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/log/webapp</span>
      <span class="c1"># this field is optional</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DirectoryOrCreate</span>
</pre></div>
</div>
</div>
<p>init_container</p>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text">init_container</span><a class="headerlink" href="#id29" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bkapp-pod</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bkapp</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bkapp-container</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">busybox:1.28</span>
    <span class="nt">command</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;sh&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;-c&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;echo</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">running!!</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">3600&#39;</span><span class="p p-Indicator">]</span>
  <span class="nt">initContainers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">init-bkservice</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">busybox</span>
    <span class="nt">command</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;sh&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;-c&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;git</span><span class="nv"> </span><span class="s">clone</span><span class="nv"> </span><span class="s">git@github.com:Bharathkumarraju/certified_kubernetes_administrator.git;&#39;</span><span class="p p-Indicator">]</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">init-bkdb</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">busybox</span>
    <span class="nt">command</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;sh&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;-c&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;until</span><span class="nv"> </span><span class="s">nslookup</span><span class="nv"> </span><span class="s">mydb;</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">echo</span><span class="nv"> </span><span class="s">waiting</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">mydb;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">2;</span><span class="nv"> </span><span class="s">done;&#39;</span><span class="p p-Indicator">]</span>




<span class="l l-Scalar l-Scalar-Plain">root@controlplane:~# kubectl edit pod red</span>
<span class="nt">error</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pods &quot;red&quot; is invalid</span>
<span class="l l-Scalar l-Scalar-Plain">A copy of your changes has been stored to &quot;/tmp/kubectl-edit-phwq3.yaml&quot;</span>
<span class="nt">error</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Edit cancelled, no valid changes were saved.</span>
<span class="l l-Scalar l-Scalar-Plain">root@controlplane:~# kubectl delete pod red</span>
<span class="l l-Scalar l-Scalar-Plain">pod &quot;red&quot; deleted</span>
<span class="l l-Scalar l-Scalar-Plain">kubectl apply -f /tmp/kubectl-edit-phwq3.yaml</span>


<span class="l l-Scalar l-Scalar-Plain">root@controlplane:~# kubectl apply -f /tmp/kubectl-edit-phwq3.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">pod/red created</span>
<span class="l l-Scalar l-Scalar-Plain">root@controlplane:~# cat /tmp/kubectl-edit-phwq3.yaml</span>
<span class="c1"># Please edit the object below. Lines beginning with a &#39;#&#39; will be ignored,</span>
<span class="c1"># and an empty file will abort the edit. If an error occurs while saving this file will be</span>
<span class="c1"># reopened with the relevant failures.</span>
<span class="c1">#</span>
<span class="c1"># pods &quot;red&quot; was not valid:</span>
<span class="c1"># * spec.initContainers: Forbidden: pod updates may not add or remove containers</span>
<span class="c1">#</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">creationTimestamp</span><span class="p">:</span> <span class="s">&quot;2021-09-21T05:35:44Z&quot;</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">red</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
  <span class="nt">resourceVersion</span><span class="p">:</span> <span class="s">&quot;984&quot;</span>
  <span class="nt">uid</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">129100ea-eaf6-45f5-b3b1-35038703b508</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">initContainers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">init-busybox</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">busybox</span>
    <span class="nt">command</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sh</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">c</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sleep 20</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">command</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sh</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">-c</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">echo The app is running! &amp;&amp; sleep 3600</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">busybox:1.28</span>
    <span class="nt">imagePullPolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">red-container</span>
    <span class="nt">resources</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
    <span class="nt">terminationMessagePath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/dev/termination-log</span>
    <span class="nt">terminationMessagePolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">File</span>
    <span class="nt">volumeMounts</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/run/secrets/kubernetes.io/serviceaccount</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default-token-5lj6j</span>
      <span class="nt">readOnly</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">dnsPolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ClusterFirst</span>
  <span class="nt">enableServiceLinks</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">nodeName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">controlplane</span>
  <span class="nt">preemptionPolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PreemptLowerPriority</span>
  <span class="nt">priority</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
  <span class="nt">restartPolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Always</span>
  <span class="nt">schedulerName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default-scheduler</span>
  <span class="nt">securityContext</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">serviceAccount</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
  <span class="nt">serviceAccountName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
  <span class="nt">terminationGracePeriodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>
  <span class="nt">tolerations</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">effect</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">NoExecute</span>
    <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node.kubernetes.io/not-ready</span>
    <span class="nt">operator</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Exists</span>
    <span class="nt">tolerationSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span>
  <span class="p p-Indicator">-</span> <span class="nt">effect</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">NoExecute</span>
    <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node.kubernetes.io/unreachable</span>
    <span class="nt">operator</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Exists</span>
    <span class="nt">tolerationSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span>
  <span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default-token-5lj6j</span>
    <span class="nt">secret</span><span class="p">:</span>
      <span class="nt">defaultMode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">420</span>
      <span class="nt">secretName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default-token-5lj6j</span>
<span class="l l-Scalar l-Scalar-Plain">root@controlplane:~#</span> 
</pre></div>
</div>
</div>
</div>
<div class="section" id="configure-sidecar-to-send-logs-to-elasticsearch">
<h2>configure sidecar to send logs to elasticsearch<a class="headerlink" href="#configure-sidecar-to-send-logs-to-elasticsearch" title="Permalink to this headline"></a></h2>
<p>used below code to to configure ELK</p>
<p>ELK code at <a class="reference external" href="https://github.com/Bharathkumarraju/certified_kubernetes_administrator/tree/master/Four_September_2021_CKA_Recap/4.Application_lifecycle_mgmt/elastic-search_multi_container_pods/">ELK-CODE</a>.</p>
</div>
<div class="section" id="command-args-in-pod-specification">
<h2>command args in pod specification<a class="headerlink" href="#command-args-in-pod-specification" title="Permalink to this headline"></a></h2>
<p>pod specifications at <a class="reference external" href="https://github.com/Bharathkumarraju/certified_kubernetes_administrator/tree/master/Four_September_2021_CKA_Recap/4.Application_lifecycle_mgmt/kubectl_commands_args/">webpods</a>.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="logging-monitoring.html" class="btn btn-neutral float-left" title="Logging and Monitoring" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cluster-maintenance.html" class="btn btn-neutral float-right" title="Cluster Maintenance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>